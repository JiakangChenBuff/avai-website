let competitions = [
  {
    name: 'Introduction to AI',
    id: 'section1',
    number: 'Section 1',
    image: 'images/comp-1.svg',
    kaggle: 'https://www.kaggle.com/c/avai-first-ml-competition/overview',
    date1: '09/28 - Topic 1.1',
    topic1: 'Intro Meeting',
    date2: '10/05 - Topic 1.2',
    topic2: 'Python',
    date3: '10/12 - Topic 1.3',
    topic3: 'ML Pipeline',
    date4: '10/19 - Topic 1.4',
    topic4: 'TBD',
    prize1: 'TBD',
    prize2: 'TBD',
    prize3: 'TBD',
    mat11: '1st Meeting Slides',
    link11:
      'https://docs.google.com/presentation/d/1n9VOqYWrl3QFYAeKTOcXzB6wQ97fWvec932NVQ-Ce18/edit?usp=sharing',
    mat12: 'MNIST Model Code',
    link12: 'https://github.com/JiakangChenBuff/mnist-model',
    mat13: 'AV AI Demo Site Repo',
    link13: 'https://github.com/subatuba21/ai-club-demos-site',
    mat14: '',
    link14: '#',
    mat21: '2nd Meeting Slides',
    link21:
      'https://docs.google.com/presentation/d/10QRyTpSLFiEu2YDDK1I8lxjgumPpMPH7Qlv3GOZft1k/edit?usp=sharing',
    mat22: 'Intro to Python Video',
    link22: 'https://www.youtube.com/watch?v=I2wURDqiXdM',
    mat23: 'Python Packages Article',
    link23:
      'https://www.udacity.com/blog/2021/01/what-is-a-python-package.html',
    mat24: 'Kaggle Python Course',
    link24: 'https://www.kaggle.com/learn/python',
    mat31: '3rd Meeting Slides',
    link31:
      'https://docs.google.com/presentation/d/1OdgMHrPYu8tGGmQI9c5FIJBh5y0pGirUYQMI3gJ0M2Q/edit?usp=sharing',
    mat32: 'Intro to ML Course',
    link32: 'https://www.kaggle.com/learn/intro-to-machine-learning',
    mat33: '',
    link33: '#',
    mat34: '',
    link34: '#',
    mat41: '',
    link41: '#',
    mat42: '',
    link42: '#',
    mat43: '',
    link43: '#',
    mat44: '',
    link44: '#',
    activityimg1: 'images/vscode.svg',
    activitylink1: 'https://condescending-varahamihira-35fa1a.netlify.app/',
    activitydesc1: 'Live Demo',
    activityimg2: 'images/github.svg',
    activitylink2: 'https://github.com/JiakangChenBuff/chrome-image-classifier',
    activitydesc2: 'Activity Repo',
    activityimg3: 'images/kaggle_logo.svg',
    activitylink3: 'https://www.kaggle.com/jiakangchen2/3rd-meeting/notebook',
    activitydesc3: 'Notebook Code',
    activityimg4: '',
    activitylink4: '#',
    activitydesc4: '',
  },
  {
    name: 'Key ML Models P. 1',
    id: 'section2',
    number: 'Section 2',
    image: 'images/comp-2.svg',
    kaggle: '#',
    date1: '11/02 - Topic 2.1',
    topic1: 'TBD',
    date2: '11/09 - Topic 2.2',
    topic2: 'TBD',
    date3: '11/16 - Topic 2.3',
    topic3: 'TBD',
    date4: '11/30 - Topic 2.4',
    topic4: 'TBD',
    prize1: 'TBD',
    prize2: 'TBD',
    prize3: 'TBD',
    mat11: '',
    link11: '#',
    mat12: '',
    link12: '#',
    mat13: '',
    link13: '#',
    mat14: '',
    link14: '#',
    mat21: '',
    link21: '#',
    mat22: '',
    link22: '#',
    mat23: '',
    link23: '#',
    mat24: '',
    link24: '#',
    mat31: '',
    link31: '#',
    mat32: '',
    link32: '#',
    mat33: '',
    link33: '#',
    mat34: '',
    link34: '#',
    mat41: '',
    link41: '#',
    mat42: '',
    link42: '#',
    mat43: '',
    link43: '#',
    mat44: '',
    link44: '#',
    activityimg1: '',
    activitylink1: '#',
    activitydesc1: '',
    activityimg2: '',
    activitylink2: '#',
    activitydesc2: '',
    activityimg3: '',
    activitylink3: '#',
    activitydesc3: '',
    activityimg4: '',
    activitylink4: '#',
    activitydesc4: '',
  },
  {
    name: 'Key ML Models P. 2',
    id: 'section3',
    number: 'Section 3',
    image: 'images/comp-3.svg',
    kaggle: '#',
    date1: '12/07 - Topic 3.1',
    topic1: 'TBD',
    date2: '12/14 - Topic 3.2',
    topic2: 'TBD',
    date3: '01/11 - Topic 3.3',
    topic3: 'TBD',
    date4: '01/18 - Topic 3.4',
    topic4: 'TBD',
    prize1: 'TBD',
    prize2: 'TBD',
    prize3: 'TBD',
    mat11: '',
    link11: '#',
    mat12: '',
    link12: '#',
    mat13: '',
    link13: '#',
    mat14: '',
    link14: '#',
    mat21: '',
    link21: '#',
    mat22: '',
    link22: '#',
    mat23: '',
    link23: '#',
    mat24: '',
    link24: '#',
    mat31: '',
    link31: '#',
    mat32: '',
    link32: '#',
    mat33: '',
    link33: '#',
    mat34: '',
    link34: '#',
    mat41: '',
    link41: '#',
    mat42: '',
    link42: '#',
    mat43: '',
    link43: '#',
    mat44: '',
    link44: '#',
    activityimg1: '',
    activitylink1: '#',
    activitydesc1: '',
    activityimg2: '',
    activitylink2: '#',
    activitydesc2: '',
    activityimg3: '',
    activitylink3: '#',
    activitydesc3: '',
    activityimg4: '',
    activitylink4: '#',
    activitydesc4: '',
  },
  {
    name: 'Neural Networks',
    id: 'section4',
    number: 'Section 4',
    image: 'images/comp-4.svg',
    kaggle: '#',
    date1: '01/25 - Topic 4.1',
    topic1: 'TBD',
    date2: '02/01 - Topic 4.2',
    topic2: 'TBD',
    date3: '02/08 - Topic 4.3',
    topic3: 'TBD',
    date4: '02/15 - Topic 4.4',
    topic4: 'TBD',
    prize1: 'TBD',
    prize2: 'TBD',
    prize3: 'TBD',
    mat11: '',
    link11: '#',
    mat12: '',
    link12: '#',
    mat13: '',
    link13: '#',
    mat14: '',
    link14: '#',
    mat21: '',
    link21: '#',
    mat22: '',
    link22: '#',
    mat23: '',
    link23: '#',
    mat24: '',
    link24: '#',
    mat31: '',
    link31: '#',
    mat32: '',
    link32: '#',
    mat33: '',
    link33: '#',
    mat34: '',
    link34: '#',
    mat41: '',
    link41: '#',
    mat42: '',
    link42: '#',
    mat43: '',
    link43: '#',
    mat44: '',
    link44: '#',
    activityimg1: '',
    activitylink1: '#',
    activitydesc1: '',
    activityimg2: '',
    activitylink2: '#',
    activitydesc2: '',
    activityimg3: '',
    activitylink3: '#',
    activitydesc3: '',
    activityimg4: '',
    activitylink4: '#',
    activitydesc4: '',
  },
  {
    name: 'Computer Vision',
    id: 'section5',
    number: 'Section 5',
    image: 'images/comp-5.svg',
    kaggle: '#',
    date1: '02/22 - Topic 5.1',
    topic1: 'TBD',
    date2: '03/01 - Topic 5.2',
    topic2: 'TBD',
    date3: '03/08 - Topic 5.3',
    topic3: 'TBD',
    date4: '03/15 - Topic 5.4',
    topic4: 'TBD',
    prize1: 'TBD',
    prize2: 'TBD',
    prize3: 'TBD',
    mat11: '',
    link11: '#',
    mat12: '',
    link12: '#',
    mat13: '',
    link13: '#',
    mat14: '',
    link14: '#',
    mat21: '',
    link21: '#',
    mat22: '',
    link22: '#',
    mat23: '',
    link23: '#',
    mat24: '',
    link24: '#',
    mat31: '',
    link31: '#',
    mat32: '',
    link32: '#',
    mat33: '',
    link33: '#',
    mat34: '',
    link34: '#',
    mat41: '',
    link41: '#',
    mat42: '',
    link42: '#',
    mat43: '',
    link43: '#',
    mat44: '',
    link44: '#',
    activityimg1: '',
    activitylink1: '#',
    activitydesc1: '',
    activityimg2: '',
    activitylink2: '#',
    activitydesc2: '',
    activityimg3: '',
    activitylink3: '#',
    activitydesc3: '',
    activityimg4: '',
    activitylink4: '#',
    activitydesc4: '',
  },
  {
    name: 'Natural Language',
    id: 'section6',
    number: 'Section 6',
    image: 'images/comp-6.svg',
    kaggle: '#',
    date1: '03/22 - Topic 6.1',
    topic1: 'TBD',
    date2: '03/29 - Topic 6.2',
    topic2: 'TBD',
    date3: '04/12 - Topic 6.3',
    topic3: 'TBD',
    date4: '04/19 - Topic 6.4',
    topic4: 'TBD',
    prize1: 'TBD',
    prize2: 'TBD',
    prize3: 'TBD',
    mat11: '',
    link11: '#',
    mat12: '',
    link12: '#',
    mat13: '',
    link13: '#',
    mat14: '',
    link14: '#',
    mat21: '',
    link21: '#',
    mat22: '',
    link22: '#',
    mat23: '',
    link23: '#',
    mat24: '',
    link24: '#',
    mat31: '',
    link31: '#',
    mat32: '',
    link32: '#',
    mat33: '',
    link33: '#',
    mat34: '',
    link34: '#',
    mat41: '',
    link41: '#',
    mat42: '',
    link42: '#',
    mat43: '',
    link43: '#',
    mat44: '',
    link44: '#',
    activityimg1: '',
    activitylink1: '#',
    activitydesc1: '',
    activityimg2: '',
    activitylink2: '#',
    activitydesc2: '',
    activityimg3: '',
    activitylink3: '#',
    activitydesc3: '',
    activityimg4: '',
    activitylink4: '#',
    activitydesc4: '',
  },
  {
    name: 'GANs & Reinforcement',
    id: 'section7',
    number: 'Section 7',
    image: 'images/comp-7.svg',
    kaggle: '#',
    date1: '04/26 - Topic 7.1',
    topic1: 'TBD',
    date2: '05/03 - Topic 7.2',
    topic2: 'TBD',
    date3: '05/10 - Topic 7.3',
    topic3: 'TBD',
    date4: '05/17 - Topic 7.4',
    topic4: 'TBD',
    prize1: 'TBD',
    prize2: 'TBD',
    prize3: 'TBD',
    mat11: '',
    link11: '#',
    mat12: '',
    link12: '#',
    mat13: '',
    link13: '#',
    mat14: '',
    link14: '#',
    mat21: '',
    link21: '#',
    mat22: '',
    link22: '#',
    mat23: '',
    link23: '#',
    mat24: '',
    link24: '#',
    mat31: '',
    link31: '#',
    mat32: '',
    link32: '#',
    mat33: '',
    link33: '#',
    mat34: '',
    link34: '#',
    mat41: '',
    link41: '#',
    mat42: '',
    link42: '#',
    mat43: '',
    link43: '#',
    mat44: '',
    link44: '#',
    activityimg1: '',
    activitylink1: '#',
    activitydesc1: '',
    activityimg2: '',
    activitylink2: '#',
    activitydesc2: '',
    activityimg3: '',
    activitylink3: '#',
    activitydesc3: '',
    activityimg4: '',
    activitylink4: '#',
    activitydesc4: '',
  },
];

const compList = document.getElementById('competition-list');
const searchBar = document.getElementById('search-bar');

const displayComps = (comps) => {
  const htmlString = comps
    .map((comp) => {
      return `
        <li class="transition2" data-modal-target=${'#' + comp.id}>
          <img class="stagger2" src=${comp.image}> </img>
          <p class="stagger2" >${comp.number}</p>
          <h1 class="stagger2">${comp.name}</h1>
        </li>
        <div class="modal" id=${comp.id}>
          <div class="modal-container">
            <div class="modal-left">
              <div class="header">
                <p class="modal-date">${comp.number}</p>
                <h1>${comp.name}</h1>
              </div>
              <div class="left-links">
                <div class="left-card">
                  <div class="box-top">
                    <p>${comp.date1}</p>
                    <h1>${comp.topic1}</h1>
                  </div>
                  <div class="box-bottom">
                    <div class="left">
                      <a href=${comp.link11} target="_blank">${comp.mat11}</a>
                      <a href=${comp.link12} target="_blank">${comp.mat12}</a>
                      <a href=${comp.link13} target="_blank">${comp.mat13}</a>
                      <a href=${comp.link14} target="_blank">${comp.mat14}</a>
                    </div>
                    <div class="right">
                      <a href=${comp.activitylink1} target="_blank"><img src=${
        comp.activityimg1
      }></a>
                      <p>${comp.activitydesc1}</p>
                    </div>
                  </div>
                </div>
                <div class="left-card">
                  <div class="box-top">
                    <p>${comp.date2}</p>
                    <h1>${comp.topic2}</h1>
                  </div>
                  <div class="box-bottom">
                    <div class="left">
                      <a href=${comp.link21} target="_blank">${comp.mat21}</a>
                      <a href=${comp.link22} target="_blank">${comp.mat22}</a>
                      <a href=${comp.link23} target="_blank">${comp.mat23}</a>
                      <a href=${comp.link24} target="_blank">${comp.mat24}</a>
                    </div>
                    <div class="right">
                      <a href=${comp.activitylink2} target="_blank"><img src=${
        comp.activityimg2
      }></a>
                      <p>${comp.activitydesc2}</p>
                    </div>
                  </div>
                </div>
                <div class="left-card">
                  <div class="box-top">
                    <p>${comp.date3}</p>
                    <h1>${comp.topic3}</h1>
                  </div>
                  <div class="box-bottom">
                    <div class="left">
                      <a href=${comp.link31} target="_blank">${comp.mat31}</a>
                      <a href=${comp.link32} target="_blank">${comp.mat32}</a>
                      <a href=${comp.link33} target="_blank">${comp.mat33}</a>
                      <a href=${comp.link34} target="_blank">${comp.mat34}</a>
                    </div>
                    <div class="right">
                      <a href=${comp.activitylink3} target="_blank"><img src=${
        comp.activityimg3
      }></a>
                      <p>${comp.activitydesc3}</p>
                    </div>
                  </div>
                </div>
                <div class="left-card">
                  <div class="box-top">
                    <p>${comp.date4}</p>
                    <h1>${comp.topic4}</h1>
                  </div>
                  <div class="box-bottom">
                    <div class="left">
                      <a href=${comp.link41} target="_blank">${comp.mat41}</a>
                      <a href=${comp.link42} target="_blank">${comp.mat42}</a>
                      <a href=${comp.link43} target="_blank">${comp.mat43}</a>
                      <a href=${comp.link44} target="_blank">${comp.mat44}</a>
                    </div>
                    <div class="right">
                      <a href=${comp.activitylink4} target="_blank"><img src=${
        comp.activityimg4
      }></a>
                      <p>${comp.activitydesc4}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-right">
              <img data-close-button class="close-button" src="images/exit.svg"> </img>
              <div class="right-card">
                <a id="kaggle" href=${comp.kaggle} target="_blank">
                  <img class="kaggle" src="images/kaggle.svg"> </img>
                </a>
              </div>
              <div class="bottom-card">
                <div class="title">
                  <h1> Prizes </h1>
                  <img src="images/trophy.svg" </img>
                </div>
                <div class="prizes">
                  <p>
                    <strong> 1st: </strong> &nbsp;&nbsp;&nbsp;${comp.prize1}
                  </p>
                  <p>
                    <strong> 2nd: </strong> &nbsp;&nbsp;&nbsp;${comp.prize2}
                  </p>
                  <p>
                    <strong> 3rd: </strong> &nbsp;&nbsp;&nbsp;${comp.prize3}
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        `;
    })
    .join('');

  compList.innerHTML = htmlString;
  const openModalButtons = document.querySelectorAll('[data-modal-target]');
  const overlay = document.getElementById('overlay');
  const closeModalButtons = document.querySelectorAll('[data-close-button]');

  openModalButtons.forEach((button) => {
    button.addEventListener('click', () => {
      const modal = document.querySelector(button.dataset.modalTarget);
      openModal(modal);
    });
  });

  overlay.addEventListener('click', () => {
    const modals = document.querySelectorAll('.modal.active');
    modals.forEach((modal) => {
      closeModal(modal);
    });
  });

  closeModalButtons.forEach((button) => {
    button.addEventListener('click', () => {
      const modal = button.closest('.modal');
      closeModal(modal);
    });
  });
};

displayComps(competitions);

searchBar.addEventListener('keyup', (e) => {
  const searchString = e.target.value.toLowerCase();

  const filtered = competitions.filter((comp) => {
    return (
      comp.name.toLowerCase().includes(searchString) ||
      comp.date1.toLowerCase().includes(searchString) ||
      comp.date2.toLowerCase().includes(searchString) ||
      comp.date3.toLowerCase().includes(searchString) ||
      comp.date4.toLowerCase().includes(searchString) ||
      comp.topic1.toLowerCase().includes(searchString) ||
      comp.topic2.toLowerCase().includes(searchString) ||
      comp.topic3.toLowerCase().includes(searchString) ||
      comp.topic4.toLowerCase().includes(searchString)
    );
  });
  displayComps(filtered);
});

function openModal(modal) {
  if (modal == null) return;
  modal.classList.add('active');
  overlay.classList.add('active');
}

function closeModal(modal) {
  if (modal == null) return;
  modal.classList.remove('active');
  overlay.classList.remove('active');
}
